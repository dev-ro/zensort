# ZenSort

![ZenSort Logo](assets/images/zensort_logo_wordmark.png)

> Find clarity in the chaos.

ZenSort is a digital organization tool designed to bring peace and order to your digital life. It starts by helping you organize your YouTube liked videos into "Smart Shelves," making it easy to rediscover the content you love.

## ✨ Features

- **Rediscover Your Library**: Effortlessly organize your entire liked video library.
- **AI-Powered "Smart Shelves"**: Our AI uses k-means clustering to automatically group your videos into intelligent, well-defined shelves.
- **Export to Playlists**: Turn your Shelves into new YouTube playlists to escape the algorithm.
- **Find Lost Music**: Locate and restore your legacy music uploads.

## 🚀 Getting Started

### Prerequisites

- [Flutter SDK](https://flutter.dev/docs/get-started/install)
- [Firebase CLI](https://firebase.google.com/docs/cli)
- An editor like [VS Code](https://code.visualstudio.com/) or [Android Studio](https://developer.android.com/studio).

### Installation

1. **Clone the repository:**

    ```sh
    git clone https://github.com/dev-ro/zensort.git
    cd zensort
    ```

2. **Install Flutter dependencies:**

    ```sh
    flutter pub get
    ```

3. **Set up Firebase:**
    - This project uses different Firebase configurations for development and production.
    - Place your `google-services.json` (for Android) and `GoogleService-Info.plist` (for iOS) in the respective platform directories.
    - The app uses two different Firebase projects: one for development (`zensort-dev`) and one for production (`zensort-prod`). The correct configuration is chosen at build time.

### Running the App

The application uses a flavor system to separate development and production environments.

- **To run in development mode:**

    ```sh
    flutter run --dart-define=FLAVOR=dev
    ```

    This will use the `firebase_options_dev.dart` configuration.

- **To run in production mode:**

    ```sh
    flutter run --dart-define=FLAVOR=prod
    ```

    This will use the `firebase_options.dart` configuration.

## 🚀 Deployment

Deployment is handled by an automated CI/CD pipeline using GitHub Actions, triggered by your Git workflow.

### Development & Staging Environment

- **Trigger:** Every push to the `main` branch.
- **Action:** The workflow automatically builds the **dev** version of the app and deploys it to the development project on Firebase.
- **URL:** [https://zensort-dev.web.app](https://zensort-dev.web.app)

This provides a constantly updated staging environment for testing.

### Production Environment

Deploying to production is an intentional, manual action driven by a single script that handles versioning and deployment.

- **Prerequisite:** You must have a Bash-compatible terminal like **Git Bash** on Windows.
- **Command:** To deploy, run the `deploy.sh` script with the type of release you are making (`major`, `minor`, or `patch`).

  - For a small bug fix (e.g., `1.3.0` -> `1.3.1`):

    ```sh
    ./scripts/deploy.sh patch
    ```

  - For a new feature (e.g., `1.3.1` -> `1.4.0`):

    ```sh
    ./scripts/deploy.sh minor
    ```

  - For a major, breaking change (e.g., `1.4.0` -> `2.0.0`):

    ```sh
    ./scripts/deploy.sh major
    ```

- **Action:** The script will automatically:
    1. Perform safety checks (e.g., ensure you are on the `main` branch).
    2. Increment the version number in the `scripts/VERSION` file.
    3. Ask for your final confirmation.
    4. Commit the version bump, create a new Git tag, and push to GitHub.
    5. This push triggers the GitHub Actions workflow to build the **prod** version and deploy it to the production project.

## 📁 Project Structure

```text
zensort/
├── android/         # Android specific files
├── assets/          # Images, fonts, and other static assets
├── functions/       # Firebase Cloud Functions
├── ios/             # iOS specific files
├── lib/             # Main application source code (Dart)
│   ├── legal/       # Privacy Policy and Terms of Service
│   ├── main.dart    # Main application entry point
│   └── theme.dart   # Application theme
├── scripts/         # Automation and helper scripts
│   ├── build.sh
│   ├── check_build_flavor.sh
│   ├── deploy.sh
│   └── VERSION
├── test/            # Widget tests
└── ...              # Other platform-specific directories
```

## ☁️ Firebase Cloud Functions

The `functions` directory contains the backend logic for ZenSort, including:

- `add_to_waitlist`: Adds a user's email to the waitlist in Firestore.
- `sync_youtube_liked_videos`: A function to sync a user's liked videos from YouTube.

See the `functions/README.md` for more details.

## 🤝 Contributing

Contributions are welcome! Please feel free to submit a pull request.

## 📄 License

This project is proprietary. See the `LICENSE` file for more details (if applicable).

---

_This README was generated by an AI assistant._
