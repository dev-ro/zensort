# ZenSort

![ZenSort Logo](assets/images/zensort_logo_wordmark.png)

> Find clarity in the chaos.

ZenSort is a digital organization tool designed to bring peace and order to your digital life. It starts by helping you organize your YouTube liked videos into "Smart Shelves," making it easy to rediscover the content you love.

## ✨ Features

- **Rediscover Your Library**: Effortlessly organize your entire liked video library.
- **AI-Powered "Smart Shelves"**: Our AI uses k-means clustering to automatically group your videos into intelligent, well-defined shelves.
- **Export to Playlists**: Turn your Shelves into new YouTube playlists to escape the algorithm.
- **Find Lost Music**: Locate and restore your legacy music uploads.

## 🚀 Getting Started

### Prerequisites

- [Flutter SDK](https://flutter.dev/docs/get-started/install)
- [Firebase CLI](https://firebase.google.com/docs/cli)
- An editor like [VS Code](https://code.visualstudio.com/) or [Android Studio](https://developer.android.com/studio).

### Installation

1. **Clone the repository:**

    ```sh
    git clone https://github.com/dev-ro/zensort.git
    cd zensort
    ```

2. **Install Flutter dependencies:**

    ```sh
    flutter pub get
    ```

3. **Set up Firebase:**
    - This project uses different Firebase configurations for development and production.
    - Place your `google-services.json` (for Android) and `GoogleService-Info.plist` (for iOS) in the respective platform directories.
    - The app uses two different Firebase projects: one for development (`zensort-dev`) and one for production (`zensort-prod`). The correct configuration is chosen at build time.

### Running the App

The application uses a flavor system to separate development and production environments.

- **To run in development mode:**

    ```sh
    flutter run --dart-define=FLAVOR=dev
    ```

    This will use the `firebase_options_dev.dart` configuration.

- **To run in production mode:**

    ```sh
    flutter run --dart-define=FLAVOR=prod
    ```

    This will use the `firebase_options.dart` configuration.

## 🚀 Deployment

This project uses a combination of manual and automated deployments to ensure safety and consistency.

### Manual Deployment (Local)

The manual deployment process includes a safety check to prevent deploying the wrong build to the wrong environment.

1. **Switch to your target Firebase project:**
    - For production: `firebase use prod`
    - For development: `firebase use dev`

2. **Build the app with the correct flavor:**
    - The `build.sh` script handles this. It must be run from a Bash-compatible terminal like Git Bash on Windows.
    - For production: `./build.sh prod`
    - For development: `./build.sh dev`

3. **Deploy:**
    - `firebase deploy`

    If the build flavor does not match the target project, the deployment will be automatically aborted with an error message.

### Automated Deployment (GitHub Actions)

The CI/CD pipeline is configured to deploy automatically based on your Git workflow.

- **Development Deployment:**
  - **Trigger:** Pushing commits to the `main` branch.
  - **Action:** Automatically builds the **dev** version of the app and deploys it to the `zensort-dev` project. This keeps your staging environment up-to-date.

- **Production Deployment:**
  - **Trigger:** Pushing a new Git tag that starts with `v` (e.g., `v1.0.1`, `v1.1`).
  - **Action:** Automatically builds the **prod** version of the app and deploys it to the `zensort-a7b47` (production) project.
  - **Example Command:**

    ```sh
        # Create a new version tag
        git tag v1.0.1
        # Push the tag to GitHub to trigger the production deploy
        git push origin v1.0.1
        ```

## 📁 Project Structure

```text
zensort/
├── android/         # Android specific files
├── assets/          # Images, fonts, and other static assets
├── functions/       # Firebase Cloud Functions
├── ios/             # iOS specific files
├── lib/             # Main application source code (Dart)
│   ├── legal/       # Privacy Policy and Terms of Service
│   ├── main.dart    # Main application entry point
│   └── theme.dart   # Application theme
├── test/            # Widget tests
└── ...              # Other platform-specific directories (Linux, macOS, web, Windows)
```

## ☁️ Firebase Cloud Functions

The `functions` directory contains the backend logic for ZenSort, including:

- `add_to_waitlist`: Adds a user's email to the waitlist in Firestore.
- `sync_youtube_liked_videos`: A function to sync a user's liked videos from YouTube.

See the `functions/README.md` for more details.

## 🤝 Contributing

Contributions are welcome! Please feel free to submit a pull request.

## 📄 License

This project is proprietary. See the `LICENSE` file for more details (if applicable).

---

_This README was generated by an AI assistant._
